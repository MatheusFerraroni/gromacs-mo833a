---
- hosts: all
  tasks:
  - name: Preparando maquina para rodar o gromacs_mpi
    become: yes
    shell: "wget https://raw.githubusercontent.com/MatheusFerraroni/gromacs-mo833a/ativi-7-exp-1/experiments/ativ-7-exp-1/script_setup.sh && sh script_setup.sh"
  - name: Coloca 777 na pasta do gromacs
    become: yes
    shell: "chmod -R 777 gromacs-mo833a/"
  - name: Gera ssh
    shell: "ssh-keygen -N '' -f ~/.ssh/id_rsa"
  - name: Pegar arquivo ssh do host
    become: no
    synchronize:
      src: ~/.ssh/id_rsa.pub
      dest: /home/matheus/Desktop/mo833/ativ7/teste/{{inventory_hostname}}-id_rsa.pub
      mode: pull
      recursive: yes
  - name: faz pasta pros sshs
    shell: "mkdir sshs_amigas"
  - name: Fazendo upload ssh keys
    become: no
    synchronize:
      src: /home/matheus/Desktop/mo833/ativ7/teste/
      dest: ~/sshs_amigas/
      recursive: yes
  - name: Pegando script setup2
    become: no
    shell: "cd ~/sshs_amigas/ && wget https://raw.githubusercontent.com/MatheusFerraroni/gromacs-mo833a/ativi-7-exp-1/experiments/ativ-7-exp-1/script_setup2.sh && sh script_setup2.sh"
